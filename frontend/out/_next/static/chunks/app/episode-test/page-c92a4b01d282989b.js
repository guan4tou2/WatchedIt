(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,t)=>{let r=(0,n.forwardRef)(({color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:d="",children:c,...u},f)=>(0,n.createElement)("svg",{ref:f,...s,width:a,height:a,stroke:r,strokeWidth:o?24*Number(l)/Number(a):l,className:["lucide",`lucide-${i(e)}`,d].join(" "),...u},[...t.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},9883:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7727:function(e,t,r){Promise.resolve().then(r.bind(r,6113))},6113:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c},dynamic:function(){return d}});var n=r(7437),s=r(2265),i=r(5671),a=r(575),l=r(841),o=r(170);let d="force-dynamic";function c(){let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(!1),c=(r,n)=>{try{let s=l.we.create({title:"測試".concat(r," - ").concat(new Date().toLocaleTimeString()),type:r,status:"進行中",year:2024,rating:4,episodes:n,source:"測試新增"});t([...e,s])}catch(e){console.error("新增測試作品失敗:",e)}};return((0,s.useEffect)(()=>{d(!0)},[]),r)?(0,n.jsxs)("div",{className:"container mx-auto p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"集數管理測試"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"測試操作"})}),(0,n.jsxs)(i.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(a.z,{onClick:()=>{c("動畫",[{id:"ep-1",number:1,title:"第一集",description:"這是第一集的描述",type:"episode",season:1,watched:!0,date_watched:new Date().toISOString()},{id:"ep-2",number:2,title:"第二集",description:"這是第二集的描述",type:"episode",season:1,watched:!1},{id:"ep-special",number:1,title:"特別篇",description:"這是特別篇的描述",type:"special",season:1,watched:!1}])},children:"新增動畫測試"}),(0,n.jsx)(a.z,{onClick:()=>{c("小說",[{id:"ch-1",number:1,title:"第一章",description:"這是第一章的內容",type:"chapter",season:1,watched:!0,date_watched:new Date().toISOString()},{id:"ch-2",number:2,title:"第二章",description:"這是第二章的內容",type:"chapter",season:1,watched:!1}])},children:"新增小說測試"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(a.z,{onClick:()=>{try{let e=l.we.getAll().filter(e=>!e.title.includes("測試"));localStorage.setItem("watchedit_works",JSON.stringify(e)),t([])}catch(e){console.error("清除測試作品失敗:",e)}},variant:"outline",className:"w-full",children:"清除測試作品"}),(0,n.jsx)(a.z,{onClick:()=>{console.log("所有作品:",l.we.getAll())},variant:"outline",className:"w-full",children:"查看所有作品"})]})]})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"集數管理組件測試"})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)(o.Z,{episodes:[{id:"test-1",number:1,title:"測試集數",description:"這是一個測試集數",type:"episode",season:1,watched:!1}],onEpisodesChange:e=>{console.log("集數更新:",e)},type:"動畫"})})]})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"測試作品列表"})}),(0,n.jsx)(i.aY,{children:(0,n.jsxs)("div",{className:"space-y-2",children:[e.map((e,t)=>{let r=e.episodes||[],s=r.filter(e=>e.watched).length,i=r.length;return(0,n.jsxs)("div",{className:"border p-3 rounded",children:[(0,n.jsx)("div",{className:"font-medium",children:e.title}),(0,n.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["類型: ",e.type," | 集數: ",s,"/",i," ","(",i>0?Math.round(s/i*100):0,"%)"]}),(0,n.jsxs)("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["集數類型:"," ",Object.entries(r.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{})).map(e=>{let[t,r]=e;return"".concat(t,":").concat(r)}).join(", ")]})]},t)}),0===e.length&&(0,n.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"還沒有測試作品"})]})})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"統計數據"})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("pre",{className:"text-sm bg-gray-100 p-3 rounded overflow-auto",children:JSON.stringify(l.we.getStats(),null,2)})})]})]})]})]}):(0,n.jsxs)("div",{className:"container mx-auto p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"集數管理測試"}),(0,n.jsx)("p",{children:"載入中..."})]})}},3277:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var n=r(7437);r(2265);var s=r(6061),i=r(2169);let a=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary/90 text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary/90 text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive/90 text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border-border/60"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,i.cn)(a({variant:r}),t),...s})}},575:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var n=r(7437),s=r(2265),i=r(7256),a=r(6061),l=r(2169);let o=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary/90 text-primary-foreground hover:bg-primary/80",destructive:"bg-destructive/90 text-destructive-foreground hover:bg-destructive/80",outline:"border border-input/60 bg-background hover:bg-accent/50 hover:text-accent-foreground",secondary:"bg-secondary/90 text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent/50 hover:text-accent-foreground",link:"text-primary/90 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:a,asChild:d=!1,...c}=e,u=d?i.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(o({variant:s,size:a,className:r})),ref:t,...c})});d.displayName="Button"},5671:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},Zb:function(){return a},aY:function(){return d},ll:function(){return o}});var n=r(7437),s=r(2265),i=r(2169);let a=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border border-border/60 bg-card/95 text-card-foreground shadow-sm",r),...s})});a.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight text-foreground/95 dark:text-foreground/98",r),...s})});o.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground/80 dark:text-muted-foreground/90",r),...s})}).displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},2782:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var n=r(7437),s=r(2265),i=r(2169);let a=s.forwardRef((e,t)=>{let{className:r,type:s,...a}=e;return(0,n.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input/60 bg-background/95 px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground/70 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/50 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});a.displayName="Input"},841:function(e,t,r){"use strict";r.d(t,{IL:function(){return a},W0:function(){return l},we:function(){return i}});let n={WORKS:"watchedit_works",TAGS:"watchedit_tags"};function s(){return new Date().toISOString()}let i={getAll(){try{let e=localStorage.getItem(n.WORKS);return e?JSON.parse(e):[]}catch(e){return console.error("讀取作品數據失敗:",e),[]}},setAll(e){try{localStorage.setItem(n.WORKS,JSON.stringify(e))}catch(e){console.error("儲存作品數據失敗:",e)}},findByTitle(e){return this.getAll().find(t=>t.title===e)||null},findByAniListId(e){return this.getAll().find(t=>t.note&&t.note.includes("AniList ID: ".concat(e)))||null},create(e){var t;let r=this.getAll(),i={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),...e,reminder_enabled:null!==(t=e.reminder_enabled)&&void 0!==t&&t,date_added:s(),date_updated:void 0,tags:[],episodes:e.episodes||[]};return r.push(i),localStorage.setItem(n.WORKS,JSON.stringify(r)),i},update(e,t){let r=this.getAll(),i=r.findIndex(t=>t.id===e);return -1===i?null:(r[i]={...r[i],...t,date_updated:s()},localStorage.setItem(n.WORKS,JSON.stringify(r)),r[i])},delete(e){let t=this.getAll(),r=t.filter(t=>t.id!==e);return r.length!==t.length&&(localStorage.setItem(n.WORKS,JSON.stringify(r)),!0)},getList(e){let t=this.getAll();(null==e?void 0:e.title)&&(t=t.filter(t=>t.title.toLowerCase().includes(e.title.toLowerCase()))),(null==e?void 0:e.type)&&(t=t.filter(t=>t.type===e.type)),(null==e?void 0:e.status)&&(t=t.filter(t=>t.status===e.status)),(null==e?void 0:e.year)&&(t=t.filter(t=>t.year===e.year)),(null==e?void 0:e.tag_ids)&&e.tag_ids.length>0&&(t=t.filter(t=>t.tags.some(t=>e.tag_ids.includes(t.id))));let r=(null==e?void 0:e.page)||1,n=(null==e?void 0:e.size)||20,s=(r-1)*n;return{works:t.slice(s,s+n),total:t.length,page:r,size:n}},getStats(){let e=this.getAll(),t={};e.forEach(e=>{t[e.type]=(t[e.type]||0)+1});let r={};e.forEach(e=>{r[e.status]=(r[e.status]||0)+1});let n={};e.forEach(e=>{var t;let r=(null===(t=e.year)||void 0===t?void 0:t.toString())||"未知";n[r]=(n[r]||0)+1});let s=0,i=0;e.forEach(e=>{e.episodes&&(s+=e.episodes.length,i+=e.episodes.filter(e=>e.watched).length)});let a=s>0?Math.round(i/s*100):0;return{total_works:e.length,type_stats:t,status_stats:r,year_stats:n,episode_stats:{total_episodes:s,watched_episodes:i,completion_rate:a}}}},a={getAll(){try{let e=localStorage.getItem(n.TAGS);return e?JSON.parse(e):[]}catch(e){return console.error("讀取標籤數據失敗:",e),[]}},setAll(e){try{localStorage.setItem(n.TAGS,JSON.stringify(e))}catch(e){console.error("儲存標籤數據失敗:",e)}},create(e){let t=this.getAll(),r={id:Math.max(0,...t.map(e=>e.id))+1,...e};return t.push(r),localStorage.setItem(n.TAGS,JSON.stringify(t)),r},update(e,t){let r=this.getAll(),s=r.findIndex(t=>t.id===e);return -1===s?null:(r[s]={...r[s],...t},localStorage.setItem(n.TAGS,JSON.stringify(r)),r[s])},delete(e){let t=this.getAll(),r=t.filter(t=>t.id!==e);return r.length!==t.length&&(localStorage.setItem(n.TAGS,JSON.stringify(r)),!0)}},l=()=>{let e=i.getAll(),t=a.getAll();0===e.length&&(i.create({title:"進擊的巨人",type:"動畫",status:"已完結",year:2013,rating:5,review:"經典神作！",source:"AniList",episodes:[{id:"ep-1",number:1,title:"致2000年後的你",description:"艾連\xb7葉卡在夢中看到未來",type:"episode",season:1,watched:!0,date_watched:"2023-01-15T00:00:00.000Z"},{id:"ep-2",number:2,title:"那一天",description:"巨人入侵希干希納區",type:"episode",season:1,watched:!0,date_watched:"2023-01-15T00:00:00.000Z"},{id:"ep-special",number:1,title:"無悔的選擇",description:"里維兵長的外傳",type:"special",season:1,watched:!1}]}),i.create({title:"鬼滅之刃",type:"動畫",status:"進行中",year:2019,rating:4,source:"AniList",episodes:[{id:"ep-1",number:1,title:"殘酷",description:"竈門炭治郎的家人被鬼襲擊",type:"episode",season:1,watched:!0,date_watched:"2023-02-01T00:00:00.000Z"},{id:"ep-2",number:2,title:"培育者 鱗瀧左近次",description:"炭治郎開始學習呼吸法",type:"episode",season:1,watched:!0,date_watched:"2023-02-01T00:00:00.000Z"},{id:"ep-3",number:3,title:"鬼舞辻無慘",description:"炭治郎遇到鬼舞辻無慘",type:"episode",season:1,watched:!1}]}),i.create({title:"哈利波特與魔法石",type:"小說",status:"已完結",year:1997,rating:5,review:"魔法世界的開始",source:"手動新增",episodes:[{id:"ch-1",number:1,title:"活下來的男孩",description:"哈利波特被送到德思禮家",type:"chapter",season:1,watched:!0,date_watched:"2023-03-01T00:00:00.000Z"},{id:"ch-2",number:2,title:"消失的玻璃",description:"哈利發現自己的魔法能力",type:"chapter",season:1,watched:!0,date_watched:"2023-03-01T00:00:00.000Z"}]})),0===t.length&&(a.create({name:"神作",color:"#FF6B6B"}),a.create({name:"熱血",color:"#4ECDC4"}),a.create({name:"劇情",color:"#45B7D1"}),a.create({name:"魔法",color:"#96CEB4"}),a.create({name:"冒險",color:"#FFEAA7"}))}},2169:function(e,t,r){"use strict";r.d(t,{a:function(){return a},cn:function(){return i}});var n=r(7042),s=r(4769);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}function a(e){return"".concat("/WatchedIt").concat(e)}}},function(e){e.O(0,[621,170,971,458,744],function(){return e(e.s=7727)}),_N_E=e.O()}]);