(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{2898:function(e,s,r){"use strict";r.d(s,{Z:function(){return n}});var t=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,s)=>{let r=(0,t.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:o,...x},u)=>(0,t.createElement)("svg",{ref:u,...a,width:n,height:n,stroke:r,strokeWidth:c?24*Number(i)/Number(n):i,className:["lucide",`lucide-${l(e)}`,d].join(" "),...x},[...s.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(o)?o:[o]]));return r.displayName=`${e}`,r}},8203:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(2898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2245:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(2898).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},9340:function(e,s,r){Promise.resolve().then(r.bind(r,2937))},2937:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return x}});var t=r(7437),a=r(2265),l=r(575),n=r(5671),i=r(3277),c=r(5809),d=r(8203),o=r(2245);function x(){let[e,s]=(0,a.useState)([]),[r,x]=(0,a.useState)([]),[u,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)("");(0,a.useEffect)(()=>{f()},[]);let f=async()=>{m(!0);try{let[e,r]=await Promise.all([c.we.getAll(),c.IL.getAll()]);s(e),x(r)}catch(e){console.error("載入數據失敗:",e),g("載入數據失敗")}finally{m(!1)}},j=async()=>{m(!0);try{await c.qC.clearAll(),await (0,c.W0)(),await f(),g("Demo 數據已重置")}catch(e){console.error("重置 Demo 數據失敗:",e),g("重置失敗")}finally{m(!1)}},y=(()=>{let s={};return e.forEach(e=>{s[e.type]=(s[e.type]||0)+1}),s})(),b=(()=>{let s={};return e.forEach(e=>{s[e.status]=(s[e.status]||0)+1}),s})();return(0,t.jsxs)("div",{className:"container mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Demo 作品測試"}),h&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-md",children:h}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{children:"作品統計"})}),(0,t.jsx)(n.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"類型分布"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(y).map(e=>{let[s,r]=e;return(0,t.jsxs)(i.C,{variant:"secondary",children:[s,": ",r]},s)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"狀態分布"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(b).map(e=>{let[s,r]=e;return(0,t.jsxs)(i.C,{variant:"outline",children:[s,": ",r]},s)})})]})]})})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{children:"標籤信息"})}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(e=>(0,t.jsx)(i.C,{children:e.name},e.id))})})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(l.z,{onClick:j,disabled:u,className:"mr-4",children:u?"處理中...":"重置 Demo 數據"}),(0,t.jsx)(l.z,{onClick:f,disabled:u,variant:"outline",children:u?"載入中...":"重新載入"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:"Demo 作品列表"}),0===e.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:u?"載入中...":"沒有作品"}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>{let s=e.episodes||[],r=s.filter(e=>e.watched).length,a=s.length;return(0,t.jsxs)(n.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(n.ll,{className:"text-lg mb-2",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[(0,t.jsx)(i.C,{variant:"outline",children:e.type}),(0,t.jsx)(i.C,{variant:"outline",children:e.status}),e.year&&(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4 mr-1"}),e.year]})]})]}),e.rating&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4 text-yellow-500 dark:text-yellow-400 mr-1"}),(0,t.jsxs)("span",{className:"text-sm",children:[e.rating,"/5"]})]})]})}),(0,t.jsxs)(n.aY,{children:[a>0&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[(0,t.jsx)("span",{children:"進度"}),(0,t.jsxs)("span",{children:[r,"/",a]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300"})})]}),e.review&&(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:e.review}),e.tags&&e.tags.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,3).map(e=>(0,t.jsx)(i.C,{variant:"secondary",className:"text-xs",children:e.name},e.id)),e.tags.length>3&&(0,t.jsxs)(i.C,{variant:"secondary",className:"text-xs",children:["+",e.tags.length-3]})]}),e.source&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["來源: ",e.source]})]})]},e.id)})})]})]})}},3277:function(e,s,r){"use strict";r.d(s,{C:function(){return i}});var t=r(7437);r(2265);var a=r(6061),l=r(2169);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary/90 text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary/90 text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive/90 text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border-border/60"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:r,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)(n({variant:r}),s),...a})}}},function(e){e.O(0,[621,330,971,458,744],function(){return e(e.s=9340)}),_N_E=e.O()}]);