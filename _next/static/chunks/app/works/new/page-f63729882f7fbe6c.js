(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[580],{2898:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var s=t(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,r)=>{let t=(0,s.forwardRef)(({color:t="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:c="",children:o,...u},x)=>(0,s.createElement)("svg",{ref:x,...a,width:n,height:n,stroke:t,strokeWidth:d?24*Number(i)/Number(n):i,className:["lucide",`lucide-${l(e)}`,c].join(" "),...u},[...r.map(([e,r])=>(0,s.createElement)(e,r)),...Array.isArray(o)?o:[o]]));return t.displayName=`${e}`,t}},9883:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1882:function(e,r,t){Promise.resolve().then(t.bind(t,3110))},3110:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var s=t(7437),a=t(2265),l=t(4033),n=t(5671),i=t(575),d=t(2782),c=t(2169);let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("textarea",{className:(0,c.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...a})});o.displayName="Textarea";var u=t(3277),x=t(3536),m=t(3181),g=t(3067),h=t(2245),b=t(6245);function f(){let e=(0,l.useRouter)(),{createWork:r,tags:t}=(0,x.B)(),[f,v]=(0,a.useState)(!1),[p,j]=(0,a.useState)({title:"",type:"動畫",status:"進行中",year:"",rating:"",review:"",note:"",source:""}),[y,N]=(0,a.useState)([]),k=async t=>{t.preventDefault(),v(!0);try{let t={title:p.title,type:p.type,status:p.status,year:p.year?parseInt(p.year):void 0,rating:p.rating?parseInt(p.rating):void 0,review:p.review||void 0,note:p.note||void 0,source:p.source||void 0,tags:y,episodes:[]},s=await r(t);e.push((0,c.a)("/works/detail?id=".concat(s.id)))}catch(e){console.error("創建作品失敗:",e)}finally{v(!1)}},w=e=>{j({...p,rating:p.rating===e.toString()?"":e.toString()})};return(0,s.jsxs)("div",{className:"container mx-auto p-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>e.back(),children:[(0,s.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"返回"]}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"新增作品"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"作品資訊"})}),(0,s.jsx)(n.aY,{children:(0,s.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium form-label-secondary",children:"標題 *"}),(0,s.jsx)(d.I,{value:p.title,onChange:e=>j({...p,title:e.target.value}),placeholder:"作品標題",required:!0,className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium form-label-secondary",children:"類型 *"}),(0,s.jsxs)("select",{value:p.type,onChange:e=>j({...p,type:e.target.value}),className:"w-full mt-1 p-2 border rounded-md dark:text-foreground/95 dark:bg-background/95",required:!0,children:[(0,s.jsx)("option",{value:"動畫",children:"動畫"}),(0,s.jsx)("option",{value:"電影",children:"電影"}),(0,s.jsx)("option",{value:"電視劇",children:"電視劇"}),(0,s.jsx)("option",{value:"小說",children:"小說"}),(0,s.jsx)("option",{value:"漫畫",children:"漫畫"}),(0,s.jsx)("option",{value:"遊戲",children:"遊戲"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium form-label-secondary",children:"狀態 *"}),(0,s.jsxs)("select",{value:p.status,onChange:e=>j({...p,status:e.target.value}),className:"w-full mt-1 p-2 border rounded-md dark:text-foreground/95 dark:bg-background/95",required:!0,children:[(0,s.jsx)("option",{value:"進行中",children:"進行中"}),(0,s.jsx)("option",{value:"已完結",children:"已完結"}),(0,s.jsx)("option",{value:"暫停",children:"暫停"}),(0,s.jsx)("option",{value:"放棄",children:"放棄"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium form-label-secondary",children:"年份"}),(0,s.jsx)(d.I,{type:"number",value:p.year,onChange:e=>j({...p,year:e.target.value}),placeholder:"2023",min:"1900",max:"2030",className:"mt-1"})]})]}),(0,s.jsx)(m.Z,{availableTags:t,selectedTags:y,onTagsChange:N}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"評分"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>w(e),className:"p-2 rounded-md transition-colors ".concat(parseInt(p.rating||"0")>=e?"text-yellow-500 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20":"star-icon-unselected"),children:(0,s.jsx)(h.Z,{className:"w-5 h-5",fill:parseInt(p.rating||"0")>=e?"currentColor":"none"})},e)),p.rating&&(0,s.jsxs)("span",{className:"text-sm status-text ml-2",children:[p.rating,"/5"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium form-label-secondary",children:"評論"}),(0,s.jsx)(o,{value:p.review,onChange:e=>j({...p,review:e.target.value}),placeholder:"分享您的觀後感...",rows:3,className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium form-label-secondary",children:"備註"}),(0,s.jsx)(o,{value:p.note,onChange:e=>j({...p,note:e.target.value}),placeholder:"其他備註...",rows:2,className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium form-label-secondary",children:"來源"}),(0,s.jsx)(d.I,{value:p.source,onChange:e=>j({...p,source:e.target.value}),placeholder:"AniList, 手動新增...",className:"mt-1"})]}),(0,s.jsxs)("div",{className:"flex space-x-2 pt-4",children:[(0,s.jsxs)(i.z,{type:"submit",disabled:f,className:"flex-1",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),f?"創建中...":"創建作品"]}),(0,s.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>e.back(),className:"flex-1",children:"取消"})]})]})})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"預覽"})}),(0,s.jsxs)(n.aY,{className:"space-y-4",children:[p.title&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:p.title}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,s.jsx)(u.C,{className:(e=>{switch(e){case"動畫":return"bg-purple-100 dark:bg-purple-900/20 text-purple-800 dark:text-purple-200";case"電影":return"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200";case"電視劇":return"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200";case"小說":return"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200";case"漫畫":return"bg-orange-100 dark:bg-orange-900/20 text-orange-800 dark:text-orange-200";case"遊戲":return"bg-pink-100 dark:bg-pink-900/20 text-pink-800 dark:text-pink-200";default:return"badge-unselected"}})(p.type),children:p.type}),(0,s.jsx)(u.C,{className:(e=>{switch(e){case"進行中":return"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200";case"已完結":return"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200";case"暫停":return"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200";case"放棄":return"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200";default:return"badge-unselected"}})(p.status),children:(e=>{switch(e){case"進行中":return"進行中";case"已完結":return"已完結";case"暫停":return"暫停";case"放棄":return"放棄";default:return e}})(p.status)})]})]}),p.year&&(0,s.jsxs)("div",{className:"text-sm status-text",children:["年份: ",p.year]}),y.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium form-label-secondary mb-1",children:"標籤:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:y.map(e=>(0,s.jsx)(u.C,{children:e.name},e.id))})]}),p.rating&&(0,s.jsxs)("div",{className:"flex items-center text-sm",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4 mr-1 text-yellow-500"}),"評分: ",p.rating,"/5"]}),p.review&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium form-label-secondary mb-1",children:"評論:"}),(0,s.jsx)("div",{className:"text-sm text-gray-800 bg-gray-50 p-2 rounded",children:p.review})]}),p.note&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium form-label-secondary mb-1",children:"備註:"}),(0,s.jsx)("div",{className:"text-sm text-gray-800 bg-gray-50 p-2 rounded",children:p.note})]}),p.source&&(0,s.jsxs)("div",{className:"text-sm status-text",children:["來源: ",p.source]}),!p.title&&(0,s.jsx)("div",{className:"text-center empty-state py-8",children:"填寫資訊後將在此顯示預覽"})]})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{className:"text-sm",children:"提示"})}),(0,s.jsxs)(n.aY,{className:"text-xs note-text space-y-2",children:[(0,s.jsx)("div",{children:"• 標題和類型為必填項目"}),(0,s.jsx)("div",{children:"• 可以為作品添加多個標籤"}),(0,s.jsx)("div",{children:"• 創建後可以立即添加集數"}),(0,s.jsx)("div",{children:"• 可以稍後在作品詳情頁面編輯"}),(0,s.jsx)("div",{children:"• 支援匯入/匯出資料"})]})]})]})]})]})}},3277:function(e,r,t){"use strict";t.d(r,{C:function(){return i}});var s=t(7437);t(2265);var a=t(6061),l=t(2169);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary/90 text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary/90 text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive/90 text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border-border/60"}},defaultVariants:{variant:"default"}});function i(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)(n({variant:t}),r),...a})}},2782:function(e,r,t){"use strict";t.d(r,{I:function(){return n}});var s=t(7437),a=t(2265),l=t(2169);let n=a.forwardRef((e,r)=>{let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input/60 bg-background/95 px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground/70 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/50 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n})});n.displayName="Input"}},function(e){e.O(0,[621,330,544,971,458,744],function(){return e(e.s=1882)}),_N_E=e.O()}]);