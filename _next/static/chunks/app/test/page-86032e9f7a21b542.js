(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{2365:function(e,t,r){Promise.resolve().then(r.bind(r,328))},328:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var s=r(7437),n=r(2265);class o{async request(e,t){let r="".concat(this.baseUrl).concat(e);console.log("API 請求: ".concat(r));try{let e=await fetch(r,{headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},...t});if(console.log("API 響應: ".concat(e.status," ").concat(e.statusText)),!e.ok){let t=await e.text();throw console.error("API 錯誤: ".concat(e.status," - ").concat(t)),Error("API 錯誤: ".concat(e.status," - ").concat(t))}return e.json()}catch(e){throw console.error("API 請求失敗: ".concat(r),e),e}}async getWorks(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[r,s]=e;void 0!==s&&(Array.isArray(s)?s.forEach(e=>t.append(r,e.toString())):t.append(r,s.toString()))}),this.request("/works?".concat(t.toString()))}async getWork(e){return this.request("/works/".concat(e))}async createWork(e){return this.request("/works",{method:"POST",body:JSON.stringify(e)})}async updateWork(e,t){return this.request("/works/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteWork(e){return this.request("/works/".concat(e),{method:"DELETE"})}async getStats(){return this.request("/works/stats/overview")}async getTags(){return this.request("/tags")}async createTag(e){return this.request("/tags",{method:"POST",body:JSON.stringify(e)})}async updateTag(e,t){return this.request("/tags/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteTag(e){return this.request("/tags/".concat(e),{method:"DELETE"})}async searchAnime(e){return this.request("/search/anime?query=".concat(encodeURIComponent(e)))}async getSuggestions(e){return this.request("/search/suggestions?query=".concat(encodeURIComponent(e)))}constructor(e){this.baseUrl=e}}let a=new o("http://localhost:8000");function c(){let[e,t]=(0,n.useState)(null),[r,o]=(0,n.useState)(null),[c,i]=(0,n.useState)(null),[l,d]=(0,n.useState)(!1),u=async()=>{d(!0),i(null);try{console.log("測試 API 連接...");let e=await a.getStats();console.log("統計數據:",e),t(e);let r=await a.getWorks();console.log("作品數據:",r),o(r)}catch(e){console.error("API 測試失敗:",e),i(e instanceof Error?e.message:"未知錯誤")}finally{d(!1)}};return(0,n.useEffect)(()=>{u()},[]),(0,s.jsxs)("div",{className:"container mx-auto p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"API 測試頁面"}),(0,s.jsx)("button",{onClick:u,disabled:l,className:"bg-blue-500 dark:bg-blue-600 text-white px-4 py-2 rounded mb-4 disabled:opacity-50",children:l?"測試中...":"重新測試 API"}),c&&(0,s.jsxs)("div",{className:"bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-200 px-4 py-3 rounded mb-4",children:[(0,s.jsx)("strong",{children:"錯誤:"})," ",c]}),e&&(0,s.jsxs)("div",{className:"bg-green-100 dark:bg-green-900/20 border border-green-400 dark:border-green-800 text-green-700 dark:text-green-200 px-4 py-3 rounded mb-4",children:[(0,s.jsx)("strong",{children:"統計 API 成功:"}),(0,s.jsx)("pre",{className:"mt-2 text-sm",children:JSON.stringify(e,null,2)})]}),r&&(0,s.jsxs)("div",{className:"bg-green-100 dark:bg-green-900/20 border border-green-400 dark:border-green-800 text-green-700 dark:text-green-200 px-4 py-3 rounded mb-4",children:[(0,s.jsx)("strong",{children:"作品 API 成功:"}),(0,s.jsx)("pre",{className:"mt-2 text-sm",children:JSON.stringify(r,null,2)})]})]})}},622:function(e,t,r){"use strict";var s=r(2265),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var s,o={},l=null,d=null;for(s in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,s)&&!i.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===o[s]&&(o[s]=t[s]);return{$$typeof:n,type:e,key:l,ref:d,props:o,_owner:c.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[971,458,744],function(){return e(e.s=2365)}),_N_E=e.O()}]);